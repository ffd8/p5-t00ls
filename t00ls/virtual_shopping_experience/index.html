<!DOCTYPE html>
<html>
<head>
	<title>finalebitte_002</title>
	<meta charset="utf-8">
	<!-- Compiled w/ P5LIVE, http://github.com/ffd8/p5live -->
	<style type="text/css">
		body{
			margin:0;
			overflow:hidden;
		}
		canvas{
			position:fixed;
			top:0;
			left:0;
			z-index:-1;
			width:100vw;
			height:100vh;
			margin:0;
		}
	</style>
	<script type="text/javascript">
		// eco-mode = only render if window focused
		window.onblur = function () {
			noLoop();
		};
		window.onfocus = function () {
			loop();
		};
	</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/addons/p5.sound.min.js"></script>
</head>
<body>

<script type="text/javascript">
//finalebitte_002

/* CUSTOM FUNCTIONS FOR P5LIVE */
// keep fullscreen if window resized
function windowResized() {
	resizeCanvas(windowWidth, windowHeight);
}

// custom ease function
function ease(iVal, oVal, eVal){
	return oVal += (iVal - oVal) * eVal;
}

// processing compatibility
function println(msg){
	print(msg);
}


var credits = {
	names: [
		`claudia.nuenlist`
		, `anna.dippert`
	],
	class: `MA1`,
	description: `virtual virtuose shopping experience`
}
// objects not selectable as singles
// soundsareawfulindisplay()
// slider for speed of conveyor belt
// video/audio recording 

let finger
let shoppingbasket
let migros

//Sound
let alarmSound


// items
let apfel
let bread
let limone
let watermelon
let coffeecup
let veganrotisseriechicken
let orange
let banane


//ALL INSTRUMENTS

let everything = [{
		name: 'apfel',
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2FApfel_.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Fapfel_2015_mitte.jpg",
		rotX: 0,
		rotY: 0,
		rotZ: 0,
		groesse: 0.5,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Noise%20Fill%205.mp3"
	},
	{
		name: 'limone',
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Flime_124.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Flime_124_baseColor.png",
		rotX: 180,
		rotY: 180,
		rotZ: 0,
		groesse: 0.8,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Perc%202.mp3",
	},
	{
		name: 'bread',
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2FBread.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2FBread.png",
		rotX: 180,
		rotY: 90,
		rotZ: 0,
		groesse: 1,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Robot%2025.mp3",

	},
	{
		name: "watermelon",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Fwatermelon.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Fwatermelon.jpg",
		rotX: 0,
		rotY: 0,
		rotZ: 0,
		groesse: 1.3,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Perc%2018.mp3",
	},
	{
		name: "coffeecup",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Fcoffee%20cup.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Fcoffee%20cup.jpg",
		rotX: 180,
		rotY: 0,
		rotZ: 0,
		groesse: 1,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Snare%202.mp3"

	},
	{
		name: "veganrotisseriechicken",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Fveganrotisseriechicken.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Fveganrotisseriechicken.jpg",
		rotX: 270,
		rotY: 180,
		rotZ: 90,
		groesse: 1,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/587782_leonard-b-blaesing_short-metal-intro-fill.mp3",
	},
	{
		name: "orange",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Forange.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Forange.jpg",
		rotX: 270,
		rotY: 0,
		rotZ: 0,
		groesse: 0.6,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/487454_ranner_object-in-the-water.mp3",

	},
	{
		name: "banane",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Fbanana.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Fbanane.jpg",
		rotX: 180,
		rotY: 0,
		rotZ: 0,
		groesse: 1.5,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Channel%20Surfing%207.mp3",
	},
	{
		name: "ananas",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Fananas.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Fananas.png",
		rotX: 180,
		rotY: 0,
		rotZ: 0,
		groesse: 1.8,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/234061_dxe10_a-minor-chord-ringout%20(1).mp3",
	},

	{
		name: "carrot",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/10170_Carrot_v01_L3.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Carrot_v01.jpg",
		rotX: 0,
		rotY: 90,
		rotZ: 0,
		groesse: 2,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/213897_garzul_organ-sounding-synth-sequence.mp3",
	},

	{
		name: "glace",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/glace.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/glace.png",
		rotX: 180,
		rotY: 0,
		rotZ: 0,
		groesse: 1,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/209943_veiler_bass-16b.mp3",
	},

	{
		name: "aubergine",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/aubergine.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/aubergine.png",
		rotX: 180,
		rotY: 0,
		rotZ: 0,
		groesse: 1,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/185549_crazyduckman_a-quack.mp3",
	},

	{
		name: "nudle",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/nudle.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/nudle.jpg",
		rotX: 180,
		rotY: 270,
		rotZ: 0,
		groesse: 1,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/138347_setuniman_echoing-quack-0c-16g.mp3",
	},

	{
		name: "handy",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/handy.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/hand.jpg",
		rotX: 180,
		rotY: 0,
		rotZ: 0,
		groesse: 1.5,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Comb%206.wav",
	},

	{
		name: "dose",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/dose.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/m-classic-ravioli-alla-napoletana.jpg?v=1639593794953",
		rotX: 18180,
		rotY: 0,
		rotZ: 0,
		groesse: 0.6,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/97244_mikey-eff_mfmetal-short-pwrchrd-estr-c.mp3",
	},

	{
		name: "kaugummi",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/kaugummi.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/kaugummi.jpg",
		rotX: 180,
		rotY: 0,
		rotZ: 0,
		groesse: 1,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Wow%204.mp3"
	},

	{
		name: "iistee",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/istee.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/kult-ice-tea-pfirsich.jpg?v=1639595226187",
		rotX: 180,
		rotY: 0,
		rotZ: 0,
		groesse: 1.5,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Wibble%20Wobble.mp3",
	},

	{
		name: "joghurt",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/JOGURT.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/excellence-truffes-joghurt-mit-rahm.jpg",
		rotX: 180,
		rotY: 180,
		rotZ: 0,
		groesse: .5,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Clipped%20Fill%2014.mp3",

	},

	{
		name: "aromat",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/aromat.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/aromat.png?v=1639597754536",
		rotX: 180,
		rotY: 0,
		rotZ: 0,
		groesse: .5,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Clap%20Fill%202.mp3",
	},

	{
		name: "milch",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/MILCH.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/valflora-milch-uht-ip-suisse.jpg",
		rotX: 180,
		rotY: 270,
		rotZ: 0,
		groesse: 1.2,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Channel%20Surfing%207.mp3",
	},

	{
		name: "chips",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/chips.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/zweifel-chips-paprika.jpg",
		rotX: 180,
		rotY: 180,
		rotZ: 0,
		groesse: 1.2,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Burning.mp3",
	},

	{
		name: "cornflakes",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/cornflakes.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/FrostedMiniWheatsTextureMap.jpg",
		rotX: 0,
		rotY: 0,
		rotZ: 180,
		groesse: 1.2,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/441032_johnnypanic_finger-slide-with-a-thump.mp3",
	},

	{
		name: "broccoli",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/broccoli1.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Broccoli2.jpg",
		rotX: 180,
		rotY: 0,
		rotZ: 180,
		groesse: 0.8,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Snare%203.mp3",
	},

	{
		name: "mayonnaise",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/mayo.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/3022364_001.jpg",
		rotX: 180,
		rotY: 0,
		rotZ: 0,
		groesse: 1,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Snare%202.mp3",
	},

	{
		name: "mate",
		model: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/mate.obj",
		texture: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/el-tony-mate-ginger.jpg",
		rotX: 180,
		rotY: 0,
		rotZ: 0,
		groesse: 1,
		sound: "https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Gregor%20M%20Robot%2049.mp3",
	}
]


let models = []

let things = []

function preload() {

	//Font
	font = loadFont('https://cdn.glitch.me/f47b350a-152f-41af-accb-2b1f49780022/Hind-Bold.ttf?v=1639737864801')


	//Sound
	soundFormats("mp3")
	alarmSound = loadSound("https://cdn.glitch.me/f47b350a-152f-41af-accb-2b1f49780022/AlarmSound.mp3?v=1639497046103")

	for(let i = 0; i < 5; i++) {
		let randoItem = random(everything)
		let loadedItem = {
			name: randoItem.name,
			model: loadModel(randoItem.model, true),
			texture: loadImage(randoItem.texture),
			rotX: randoItem.rotX,
			rotY: randoItem.rotY,
			rotZ: randoItem.rotZ,
			groesse: randoItem.groesse,
			sound: loadSound(randoItem.sound),
		}
		models.push(loadedItem)
	}




	finger = loadModel("https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/finger.obj", true)
	shoppingbasket = loadModel("https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973%2Fshoppingbasket.obj", true)
	imgShoppingbasket = loadImage("https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/afaf3.png")
	migros = loadModel("https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/migros1.obj")
	imgMigros = loadImage("https://cdn.glitch.me/ed8a4725-3fba-46e8-a48a-6a93a6062973/Migros-48011.jpeg")



}

function setup() {
	createCanvas(windowWidth, windowHeight, WEBGL);
	angleMode(DEGREES)
	imageMode(CENTER)
	// pg = createGraphics(hc.width, hc.height)

	// Button

	// button = createButton('more shopping!')
	// button.position(width / 3, height - (height / 3), -20)
	// button.mousePressed(Körbli)


	for(let m of models) {
		things.push(new Item(m))
	}
}

function draw() {
	noCursor()
	background(246, 196, 184)
	// orbitControl()
	noStroke()


	//MIGROS
	push()
	scale(width / 20, height / 16)
	rotateX(180)
	translate(0, 0, 120)
	texture(imgMigros)
	model(migros)
	pop()

	//Laser
	push()
	strokeWeight(5)
	stroke(255, 0, 0)
	line(-width / 3, -height, 0, -width / 3, 0, 0)
	pop()


	// conveyor Belt
	// Conveyor Belt
	push()
	fill(118, 131, 148)
	translate(0, -height / 4, -101)
	box(width * 1.5, height * 0.3, 1)
	pop()

	// text

	// push()
	// textFont(font)
	//  textSize(50);
	//  fill(255, 102, 0);
	//  text("MIGROS", -width/3,height/4, 0);
	//  pop()

	//  // Button
	//  push()
	// fill(255, 102, 0)
	//  circle(-width/10, height/4, 100 )
	//textFont(font)
	//textSize(15)
	//fill(255)
	//textAlign(CENTER, CENTER)
	//text("MORE SHOPPING!", -width/10,height/4, 0);
	//pop()

	for(let th of things) {
		th.display()
	}

	//ALARM
	push()
	if(mouseX >= 30 && mouseX <= width - 30) {

		if(mouseY >= 30 && mouseY <= height - 30) {
			alarmSound.stop()
		} else {

			if(mouseIsPressed) {
				alarmSound.play()
			}
		}
	} else {

		if(mouseIsPressed) {

			alarmSound.play()
		}
	}
	pop()


	//FINGER IN MOUSEX + MOUSEY
	push()
	translate(mouseX - width / 2, mouseY - height / 2, 0)
	rotateX(180)
	rotateY(180)
	scale(0.5)
	normalMaterial()
	model(finger)
	pop()

	//SHOPPINGBASKET
	if(imgShoppingbasket != null && shoppingbasket != null) {
		push()
		translate(width / 4, height / 6)
		scale(2)
		rotateX(180)

		texture(imgShoppingbasket)
		model(shoppingbasket)
		pop()

	}

}

function mouseReleased() {
	for(let th of things) {
		th.soundTrigger = true
	}
}

class Item {
	constructor(item) {
		this.x = random(width / 3, width / 5)
		this.y = random(height / 10, height / 8)
		this.z = random(-100, -20)
		// this.item = random(models)
		this.name = item.name
		this.model = item.model
		this.texture = item.texture
		this.rotX = item.rotX
		this.rotY = item.rotY
		this.rotZ = item.rotZ
		this.groesse = item.groesse
		this.sound = item.sound
		this.soundTrigger = true
	}

	display() {

		//Objects on Mouse Drag and Sound
		if(mouseIsPressed) {
			if(dist(this.x, this.y, mouseX - width / 2, mouseY - height / 2) < 100) {
				this.x = mouseX - width / 2
				this.y = mouseY - height / 2
			// 	if(this.soundTrigger) {
			// 		this.sound.play()
			// 		this.soundTrigger = false
			// 	}
			// } else {
			// 	this.soundTrigger = true
			}
		}

		// Objects Sound on Laser
		if(this.x <= -width / 3 && this.x <= -width / 4) {
			if(this.soundTrigger) {
				this.sound.play()
				this.soundTrigger = false
			}

		} else {
			this.soundTrigger = true

		}

		//ALL Things in Körbli
		push()
		translate(this.x, this.y, this.z)
		if(this.texture !== undefined && this.model != undefined) {

			rotateX(this.rotX)
			rotateY(this.rotY)
			rotateZ(this.rotZ)
			scale(this.groesse)
			texture(this.texture)
			model(this.model)

		}
		pop()

		// Things on conveyor belt
		push()
		if(this.y < -height / 4) {

			this.x = this.x - (frameCount * 0.001)

			if(this.x <= -width) {
				this.x = width
			}

		}
		pop()



	}
}


function Körbli() {
	for(let i = 0; i < 5; i++) {
		let randoItem = random(everything)
		let loadedItem = {
			name: randoItem.name,
			model: loadModel(randoItem.model, true),
			texture: loadImage(randoItem.texture),
			rotX: randoItem.rotX,
			rotY: randoItem.rotY,
			rotZ: randoItem.rotZ,
			groesse: randoItem.groesse,
			sound: loadSound(randoItem.sound),

		}
		models.push(loadedItem)
	}

	for(let m of models) {
		things.push(new Item(m))
	}
}

// function mousePressed() {
// 	if(dist(this.x, this.y, mouseX - width / 2, mouseY - height / 2) < 100) {
// 		this.x = mouseX - width / 2
// 		this.y = mouseY - height / 2
// 		this.sound.play()
// 	}
// }

function saveFrame(toolName){ 
	let timestamp = (new Date()).toISOString().replace(/[^0-9]/g, '').slice(0, -3); 
	var filename = toolName + '_' + timestamp + '.png'; // with timestamp 
	//var filename = toolName + '.png'; // without timestamp 
	save(filename);  // use to save entire canvas 
	// layer.save(filename); // use to save specific layer only 
} 

</script>

</body>
</html>